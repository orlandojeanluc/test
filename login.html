<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">  
  <link rel="shortcut icon" href="./img/fav.png" type="image/x-icon">  
  <link rel="stylesheet" href="https://kit-pro.fontawesome.com/releases/v5.12.1/css/pro.min.css">

<link rel="stylesheet" href="public/styles.css">  
  <title>CIV Capital</title>

  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
</head>

<body>

<section class="flex flex-col md:flex-row h-screen items-center">



  <div class=" hidden lg:block w-full md:w-1/2 xl:w-1/2 h-screen">
<div class="font-mbold text-6xl font-bold z-auto absolute w-full md:max-w-md lg:max-w-full md:mx-auto md:mx-0 md:w-1/2 lg:w-1/2 xl:w-1/2 h-screen px-6 lg:px-6 xl:px-2
        flex items-center justify-center xl:-mt-56 lg:-mt-48 sm:text-lg md:text-xl lg:text-5xl xl:text-5xl"></div>
  <!--<div class="bg-blue-600 hidden lg:block w-full md:w-1/2 xl:w-1/2 h-screen">!-->
    <!--<img src="https://images.unsplash.com/photo-1444313431167-e7921088a9d3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1441&q=100" alt="" class="w-full h-full object-cover">!-->

    <div class="w-full h-full object-cover pl-4 pt-20">

    <!--<lottie-player src="https://assets2.lottiefiles.com/private_files/lf30_1TcivY.json"  background="transparent"  speed="1" loop  autoplay></lottie-player>!-->
    <lottie-player  src="https://assets5.lottiefiles.com/packages/lf20_E3exCx.json"   background="transparent"  speed="1"  loop  autoplay></lottie-player>
    
    </div>

    

  </div>
<!--rounded shadow-2xl bg-white w-full md:max-w-md lg:max-w-full md:mx-auto md:mx-0 md:w-1/2  h-screen px-6 lg:px-16 xl:px-12
        flex items-center justify-center to add a card around the log in section!--> 
  <div class="bg-white w-full md:max-w-md lg:max-w-full md:mx-auto md:mx-0 md:w-1/2 xl:w-1/3 h-screen px-6 lg:px-16 xl:px-12
        flex items-center justify-center">

    <div class="w-full h-100">  

      <h1 class="font-mbold text-5xl font-bold flex items-center justify-center mb-8">Caltropia</h1>

      <h1 class="font-mreg text-xl md:text-3xl font-regular leading-tight mt-6 mb-12 flex items-center justify-center "></h1>

      <form class="mt-6">
        <div>
          <label class="font-mreg font-regular block text-gray-700"></label><!--Maybe change colors of boxes when selected!-->
          <input type="email" id="userSIEmail" onblur="checkUserSIEmail()" placeholder="Email Address" class="font-mreg font-regular rounded-full w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border-2 focus:border-blue-500 focus:bg-white focus:outline-none" autofocus autocomplete required>
          <small id="userSIEmailError" class="form-text text-danger"></small>
        </div>

        <div class="mt-4">
          <label class="font-mreg font-regular block text-gray-700"></label>
          <input type="password" id="userSIPassword" onblur="checkUserSIPassword()" placeholder="Password" minlength="6" class="font-mreg font-regular rounded-full w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border-2 focus:border-blue-500
                focus:bg-white focus:outline-none" required>
                <small id="userSIPasswordError" class="form-text text-danger"></small>

        </div>

        <div class="text-right mt-2">
          <!--<a href="#" class="font-mreg font-regular text-sm font-semibold text-gray-700 hover:text-blue-700 focus:text-blue-700">Forgot Password?</a>!-->
        </div>

        <button type="button" class="font-mreg font-regular rounded-full w-full block bg-blue-500 hover:bg-blue-400 focus:bg-blue-400 text-white font-semibold rounded-lg
              px-4 py-3 mt-6" onclick="signIn()">Log In</button>
      </form>

      <button type="submit" class="font-mreg font-regular rounded-full w-full block bg-blue-500 hover:bg-blue-400 focus:bg-blue-400 text-white font-semibold rounded-lg
              px-4 py-3 mt-6" onclick="signOut()">Log Out</button>

<!--
      <hr class="my-6 border-gray-300 w-full">

      <button type="button" class="w-full block bg-white hover:bg-gray-100 focus:bg-gray-100 text-gray-900 font-semibold rounded-lg px-4 py-3 border border-gray-300">
            <div class="flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="w-6 h-6" viewBox="0 0 48 48"><defs><path id="a" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path clip-path="url(#b)" fill="#FBBC05" d="M0 37V11l17 13z"/><path clip-path="url(#b)" fill="#EA4335" d="M0 11l17 13 7-6.1L48 14V0H0z"/><path clip-path="url(#b)" fill="#34A853" d="M0 37l30-23 7.9 1L48 0v48H0z"/><path clip-path="url(#b)" fill="#4285F4" d="M48 48L17 24l-4-3 35-10z"/></svg>
            <span class="ml-4">
            Log in
            with
            Google</span>
            </div>
          </button>
!-->
      
    </div>
  </div>
  <script>
    const firebaseConfig = {
        apiKey: "AIzaSyBxG5qf6mb8E_-b2TeXlRNseMZ26L9DRYg",
        authDomain: "trendscores-df341.firebaseapp.com",
        projectId: "trendscores-df341",
        databaseURL: "https://trendscores-df341-default-rtdb.firebaseio.com",
        storageBucket: "trendscores-df341.appspot.com",
        messagingSenderId: "565710392511",
        appId: "1:565710392511:web:37349319364bba19b3ca0a",
        measurementId: "G-8TVLFBWN63"
    };

    firebase.initializeApp(firebaseConfig);

    const auth = firebase.auth();

  // ✅ SET PERSISTENCE BEFORE SIGN-IN
  auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)
    .then(() => {
      // Then sign in however you normally do
      document.getElementById("login-button").addEventListener("click", () => {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        auth.signInWithEmailAndPassword(email, password)
          .then((userCredential) => {
            console.log("✅ Signed in:", userCredential.user.email);
            // Redirect user to your pricing/checkout page
            window.location.href = "pricing.html";
          })
          .catch((error) => {
            console.error("❌ Sign-in error:", error.message);
          });
      });
    })
    .catch((error) => {
      console.error("❌ Persistence error:", error.message);
    });

    // Monitor auth state
    firebase.auth().onAuthStateChanged(function(user) {
      const loginBtn = document.querySelector("button[onclick='signIn()']");
      const logoutBtn = document.querySelector("button[onclick='signOut()']");
      if (user) {
        loginBtn.style.display = "none";
        logoutBtn.style.display = "block";
      } else {
        loginBtn.style.display = "block";
        logoutBtn.style.display = "none";
      }
    });

    // Sign In
    function signIn() {
      const email = document.getElementById("userSIEmail").value;
      const password = document.getElementById("userSIPassword").value;

      if (!email || !password) {
        return swal("Error", "Email and password are required", "error");
      }

      firebase.auth().signInWithEmailAndPassword(email, password)
  .then(() => {
    window.location.href = "index.html"; // or whatever page
  })
  .catch((error) => {
    statusText.textContent = "Login failed: " + error.message;
  });
    }

    // Sign Out
    function signOut() {
      firebase.auth().signOut()
        .then(() => swal("Signed Out", "You have been signed out").then(() => location.reload()))
        .catch(err => swal("Error", err.message, "error"));
    }

    // Register
    function signUp() {
      const name = document.getElementById("userName").value;
      const email = document.getElementById("userEmail").value;
      const password = document.getElementById("userPassword").value;

      if (!name || !email || !password) {
        return swal("Error", "All fields are required", "error");
      }

      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then(userCredential => {
          const uid = userCredential.user.uid;
          return firebase.database().ref('users/' + uid).set({
            userName: name,
            userEmail: email,
            userFb: "",
            userTw: "",
            userGp: "",
            userBio: "",
            timestamp: new Date().toISOString()
          });
        })
        .then(() => swal("Success", "Account created successfully!", "success"))
        .catch(err => swal("Error", err.message, "error"));
    }

    // Reset Password
    function resetPassword() {
      const email = document.getElementById("userSIEmail").value;
      if (!email) return swal("Error", "Please enter your email to reset password.", "error");

      firebase.auth().sendPasswordResetEmail(email)
        .then(() => swal("Password Reset", "Check your inbox for the reset link.", "success"))
        .catch(err => swal("Error", err.message, "error"));
    }
  </script>

</section>



</body>



<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
